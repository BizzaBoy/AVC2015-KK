/*
 * Copyright (c) 2014 Thomas Roell.  All rights reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal with the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 *  1. Redistributions of source code must retain the above copyright notice,
 *     this list of conditions and the following disclaimers.
 *  2. Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimers in the
 *     documentation and/or other materials provided with the distribution.
 *  3. Neither the name of Thomas Roell, nor the names of its contributors
 *     may be used to endorse or promote products derived from this Software
 *     without specific prior written permission.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * CONTRIBUTORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * WITH THE SOFTWARE.
 */

#include "kitty.h"
#include "tft.h"

/***********************************************************************************/

static void ili9341_select(void)
{
    TFT_PORT_SPI_SELECT();
}

static void ili9341_deselect(void)
{
    TFT_PORT_SPI_DESELECT();
}

static void ili9341_send_command(uint8_t command, uint32_t count, const uint8_t *data)
{
    unsigned int n;

    TFT_PORT_SPI_COMMAND();
    TFT_PORT_SPI_SEND(command);
    TFT_PORT_SPI_DATA();

    if (count)
    {
	for (n = 0; n < count; n++)
	{
	    TFT_PORT_SPI_SEND(data[n]);
	}
    }
}

static void ili9341_setup_data(uint32_t xl, uint32_t xr, uint32_t yt, uint32_t yb)
{
    TFT_PORT_SPI_COMMAND();
    TFT_PORT_SPI_SEND(0x2a);
    TFT_PORT_SPI_DATA();

    TFT_PORT_SPI_SEND(xl >> 8);
    TFT_PORT_SPI_SEND(xl);
    TFT_PORT_SPI_SEND(xr >> 8);
    TFT_PORT_SPI_SEND(xr);

    TFT_PORT_SPI_COMMAND();
    TFT_PORT_SPI_SEND(0x2b);
    TFT_PORT_SPI_DATA();

    TFT_PORT_SPI_SEND(yt >> 8);
    TFT_PORT_SPI_SEND(yt);
    TFT_PORT_SPI_SEND(yb >> 8);
    TFT_PORT_SPI_SEND(yb);

    TFT_PORT_SPI_COMMAND();
    TFT_PORT_SPI_SEND(0x2c);
    TFT_PORT_SPI_DATA();

    TFT_PORT_SPI_SETUP_DATA16();
}

static void ili9341_finish_data(void)
{
    TFT_PORT_SPI_FINISH_DATA16();
}

static void ili9341_send_data(uint16_t data)
{
    TFT_PORT_SPI_SEND_DATA16(data);
}

static void ili9341_send_data_multiple(uint16_t data, uint32_t count)
{
    TFT_PORT_SPI_SEND_DATA16_MULTIPLE(data, count);
}


/* Static initialization table:
 *
 * <command> <count> <data>
 */
static const uint8_t ili9341_init_table[] =
{
    0xcb,  5, 0x39, 0x2c, 0x00, 0x34, 0x02, 
    0xcf,  3, 0x00, 0xc1, 0x30,
    0xe8,  3, 0x85, 0x00, 0x78,
    0xea,  2, 0x00, 0x00,
    0xed,  4, 0x64, 0x03, 0x12, 0x81,
    0xf7,  1, 0x20,
    0xc0,  1, 0x23,
    0xc1,  1, 0x10,
    0xc5,  2, 0x3e, 0x28,
    0xc7,  1, 0x86,
    0x36,  1, 0x48,
#if 0
    0x36,  1, 0x28,
#endif
    0x3a,  1, 0x55,
    0xb1,  2, 0x00, 0x18,
    0xb6,  3, 0x08, 0x82, 0x27,
    0xf2,  1, 0x00,
    0x26,  1, 0x01,
    0xe0, 15, 0x0f, 0x31, 0x2b, 0x0c, 0x0e, 0x08, 0x4e, 0xf1, 0x37, 0x07, 0x10, 0x03, 0x0E, 0x09, 0x00,
    0xe1, 15, 0x00, 0x0e, 0x14, 0x03, 0x11, 0x07, 0x31, 0xc1, 0x48, 0x08, 0x0f, 0x0c, 0x31, 0x36, 0x0F,
};

static void ili9341_initialize(void)
{
    const uint8_t *data;

    /* The BP-320 does not have a connected RESET per default. So it comes up 
     * via power on reset. So instead of having to manually reset it, all
     * that needs to be done here is to wait for 125ms ...
     */

    armv7m_systick_mdelay(125);

    ili9341_select();

    /* Send the init sequence.
     */
    data = ili9341_init_table;

    do
    {
	ili9341_send_command(data[0], data[1], &data[2]);

	data += (2 + data[1]);
    }
    while (data < (ili9341_init_table + sizeof(ili9341_init_table)));


    /* Exit Sleep 
     */
    ili9341_send_command(0x11, 0, NULL);

    ili9341_deselect();

    armv7m_systick_mdelay(120);

    ili9341_select();

    /* Display on.
     */

    ili9341_send_command(0x29, 0, NULL);

    ili9341_deselect();
}

static void ili9341_fill_rectangle(uint32_t x, uint32_t y, uint32_t w, uint32_t h, uint16_t color)
{
    uint32_t xl, xr;

    xl = x;
    xr = (x + w) -1;

    ili9341_setup_data(xl, xr, y, (y + h) -1);
    ili9341_send_data_multiple(color, (w * h));
    ili9341_finish_data();
}

static void ili9341_draw_point(uint32_t x, uint32_t y, uint16_t color)
{
    TFT_PORT_SPI_COMMAND();
    TFT_PORT_SPI_SEND(0x2a);
    TFT_PORT_SPI_DATA();
	
    TFT_PORT_SPI_SEND(x >> 8);
    TFT_PORT_SPI_SEND(x);
    TFT_PORT_SPI_SEND(x >> 8);
    TFT_PORT_SPI_SEND(x);
    
    TFT_PORT_SPI_COMMAND();
    TFT_PORT_SPI_SEND(0x2b);
    TFT_PORT_SPI_DATA();
    
    TFT_PORT_SPI_SEND(y >> 8);
    TFT_PORT_SPI_SEND(y);
    TFT_PORT_SPI_SEND(y >> 8);
    TFT_PORT_SPI_SEND(y);
    
    
    TFT_PORT_SPI_COMMAND();
    TFT_PORT_SPI_SEND(0x2c);
    TFT_PORT_SPI_DATA();
	
    TFT_PORT_SPI_SEND(color >> 8);
    TFT_PORT_SPI_SEND(color);
}

#define XDECREASING	4
#define YDECREASING	2
#define YMAJOR		1

#define OCTANT1		(1 << (YDECREASING))
#define OCTANT2		(1 << (YDECREASING|YMAJOR))
#define OCTANT3		(1 << (XDECREASING|YDECREASING|YMAJOR))
#define OCTANT4		(1 << (XDECREASING|YDECREASING))
#define OCTANT5		(1 << (XDECREASING))
#define OCTANT6		(1 << (XDECREASING|YMAJOR))
#define OCTANT7		(1 << (YMAJOR))
#define OCTANT8		(1 << (0))

#define LINEBIAS	(OCTANT2 | OCTANT3 | OCTANT4 | OCTANT5)

static void ili9341_draw_line(uint32_t x1, uint32_t y1, uint32_t x2, uint32_t y2, uint16_t color)
{
    uint32_t axis, x, y, length, n;
    int32_t adx, ady, e, e1, e2, e3, signdx, signdy;

    axis = 0;
    signdx = 1;
    signdy = 1;

    adx = x2 - x1;
    ady = y2 - y1;

    if (adx < 0)
    {
	adx = -adx;

	axis |= XDECREASING;
	signdx = -1;
    }
    
    if (ady < 0)
    {
	ady = -ady;

	axis |= YDECREASING;
	signdy = -1;
    }

    x = x1;
    y = y1;
    n = 0;

    if (adx > ady)
    {
	e1 = ady << 1;
	e2 = e1 - (adx << 1);
	e  = e1 - adx;
	length  = adx + 1;

	e -= ((LINEBIAS >> axis) & 1);

	e3 = e2 - e1;
	e  = e - e1;

	while (length--)
	{
	    x += signdx;
	    n += 1;

	    e += e1;
	    if (e >= 0)
	    {
		ili9341_fill_rectangle(((signdx > 0) ? (x-n) : (x+1)), y, n, 1, color);
		n = 0;

		y += signdy;
		e += e3;
	    }
	}

	if (n)
	{
	    ili9341_fill_rectangle(((signdx > 0) ? (x-n) : (x+1)), y, n, 1, color);
	}
    }
    else
    {
	axis |= YMAJOR;

	e1 = adx << 1;
	e2 = e1 - (ady << 1);
	e  = e1 - ady;
	length = ady + 1;

	e -= ((LINEBIAS >> axis) & 1);

	e3 = e2 - e1;
	e  = e - e1;

	while (length--)
	{
	    y += signdy;
	    n += 1;

	    e += e1;
	    if (e >= 0)
	    {
		ili9341_fill_rectangle(x, ((signdy > 0) ? (y-n) : (y+1)), 1, n, color);
		n = 0;

		x += signdx;
		e += e3;
	    }
	}

	if (n)
	{
	    ili9341_fill_rectangle(x, ((signdy > 0) ? (y-n) : (y+1)), 1, n, color);
	}
    }
}

static void ili9341_write_mono(uint32_t x, uint32_t y, uint32_t w, uint32_t h, const uint8_t *data, uint16_t color0, uint16_t color1, int transparent)
{
    uint32_t xl, xr;
    uint8_t mask, bits;

    xl = x;
    xr = (x + w) -1;

    mask = 0;
    bits = 0;

    if (transparent)
    {
	while (h--)
	{
	    x = xl;
	    
	    while (x <= xr)
	    {
		if (mask == 0)
		{
		    mask = 0x80;
		    bits = *data++;
		}
		
		if (bits & mask)
		{
		    ili9341_draw_point(x, y, color1);
		}
		
		x++;

		mask >>= 1;
	    }
	    
	    y++;
	}
    }
    else
    {
	ili9341_setup_data(xl, xr, y, (y + h) -1);
	
	while (h--)
	{
	    x = xl;
	    
	    while (x <= xr)
	    {
		if (mask == 0)
		{
		    mask = 0x80;
		    bits = *data++;
		}
		
		ili9341_send_data((bits & mask) ? color1 : color0);
		
		x++;
		
		mask >>= 1;
	    }
	    
	    y++;
	}
	
	ili9341_finish_data();
    }
}

static void ili9341_write_image(uint32_t x, uint32_t y, uint32_t w, uint32_t h, const uint8_t *data, const uint16_t *palette, int compressed)
{
    uint32_t xl, xr, count;
    uint16_t color;

    xl = x;
    xr = (x + w) -1;

    ili9341_setup_data(xl, xr, y, (y + h) -1);

    if (compressed)
    {
	while (h--)
	{
	    x = xl;
	    
	    while (x <= xr)
	    {
		count = *data++;
		x += count;
		
		if (count & 0x80)
		{
		    count = (count & ~0x80) +1;
		    
		    color = palette[*data++];
		    
		    ili9341_send_data_multiple(color, count);
		}
		else
		{
		    count = count +1;
		    
		    while (count--)
		    {
			color = palette[*data++];
			
			ili9341_send_data(color);
		    }
		}
	    }
	    
	    y++;
	}
    }
    else
    {
	while (h--)
	{
	    x = xl;
	    
	    while (x <= xr)
	    {
		x++;
		
		color = palette[*data++];
		
		ili9341_send_data(color);
	    }
	    
	    y++;
	}
    }
    
    ili9341_finish_data();
}

/***********************************************************************************/

const uint16_t tft_color_table[16] = 
{
    /* Normal */
    TFT_XLATE_COLOR(  0,   0,   0),     /* Black   */
    TFT_XLATE_COLOR(128,   0,   0),     /* Red     */
    TFT_XLATE_COLOR(  0, 128,   0),     /* Green   */
    TFT_XLATE_COLOR(128, 128,   0),     /* Yellow  */
    TFT_XLATE_COLOR(  0,   0, 128),     /* Blue    */
    TFT_XLATE_COLOR(128,   0, 128),     /* Magenta */
    TFT_XLATE_COLOR(  0, 128, 128),     /* Cyan    */
    TFT_XLATE_COLOR(192, 192, 192),     /* Gray    */

    /* Bright */
    TFT_XLATE_COLOR(128, 128, 128),     /* Dark Gray */
    TFT_XLATE_COLOR(255,   0,   0),     /* Red       */
    TFT_XLATE_COLOR(  0, 255,   0),     /* Green     */
    TFT_XLATE_COLOR(255, 255,   0),     /* Yellow    */
    TFT_XLATE_COLOR(  0,   0, 255),     /* Blue      */
    TFT_XLATE_COLOR(255,   0, 255),     /* Magenta   */
    TFT_XLATE_COLOR(  0, 255, 255),     /* Cyan      */
    TFT_XLATE_COLOR(255, 255, 255),     /* White     */
};

static const uint8_t tft_font_data_6x8[95*6] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x10, 0xe3, 0x84, 0x10, 0x01, 0x00, 
    0x6d, 0xb4, 0x80, 0x00, 0x00, 0x00, 
    0x00, 0xa7, 0xca, 0x29, 0xf2, 0x80, 
    0x20, 0xe4, 0x0c, 0x09, 0xc1, 0x00, 
    0x65, 0x90, 0x84, 0x21, 0x34, 0xc0, 
    0x21, 0x45, 0x08, 0x55, 0x23, 0x40, 
    0x30, 0xc2, 0x00, 0x00, 0x00, 0x00, 
    0x10, 0x82, 0x08, 0x20, 0x81, 0x00, 
    0x20, 0x41, 0x04, 0x10, 0x42, 0x00, 
    0x00, 0xa3, 0x9f, 0x38, 0xa0, 0x00, 
    0x00, 0x41, 0x1f, 0x10, 0x40, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0xc3, 0x08, 
    0x00, 0x00, 0x1f, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0xc3, 0x00, 
    0x00, 0x10, 0x84, 0x21, 0x00, 0x00, 
    0x39, 0x14, 0xd5, 0x65, 0x13, 0x80, 
    0x10, 0xc1, 0x04, 0x10, 0x43, 0x80, 
    0x39, 0x10, 0x46, 0x21, 0x07, 0xc0, 
    0x39, 0x10, 0x4e, 0x05, 0x13, 0x80, 
    0x08, 0x62, 0x92, 0x7c, 0x20, 0x80, 
    0x7d, 0x04, 0x1e, 0x05, 0x13, 0x80, 
    0x18, 0x84, 0x1e, 0x45, 0x13, 0x80, 
    0x7c, 0x10, 0x84, 0x20, 0x82, 0x00, 
    0x39, 0x14, 0x4e, 0x45, 0x13, 0x80, 
    0x39, 0x14, 0x4f, 0x04, 0x23, 0x00, 
    0x00, 0x03, 0x0c, 0x00, 0xc3, 0x00, 
    0x00, 0x03, 0x0c, 0x00, 0xc3, 0x08, 
    0x08, 0x42, 0x10, 0x20, 0x40, 0x80, 
    0x00, 0x07, 0xc0, 0x01, 0xf0, 0x00, 
    0x20, 0x40, 0x81, 0x08, 0x42, 0x00, 
    0x39, 0x10, 0x46, 0x10, 0x01, 0x00, 
    0x39, 0x15, 0xd5, 0x5d, 0x03, 0x80, 
    0x39, 0x14, 0x51, 0x7d, 0x14, 0x40, 
    0x79, 0x14, 0x5e, 0x45, 0x17, 0x80, 
    0x39, 0x14, 0x10, 0x41, 0x13, 0x80, 
    0x79, 0x14, 0x51, 0x45, 0x17, 0x80, 
    0x7d, 0x04, 0x1e, 0x41, 0x07, 0xc0, 
    0x7d, 0x04, 0x1e, 0x41, 0x04, 0x00, 
    0x39, 0x14, 0x17, 0x45, 0x13, 0xc0, 
    0x45, 0x14, 0x5f, 0x45, 0x14, 0x40, 
    0x38, 0x41, 0x04, 0x10, 0x43, 0x80, 
    0x04, 0x10, 0x41, 0x45, 0x13, 0x80, 
    0x45, 0x25, 0x18, 0x51, 0x24, 0x40, 
    0x41, 0x04, 0x10, 0x41, 0x07, 0xc0, 
    0x45, 0xb5, 0x51, 0x45, 0x14, 0x40, 
    0x45, 0x95, 0x53, 0x45, 0x14, 0x40, 
    0x39, 0x14, 0x51, 0x45, 0x13, 0x80, 
    0x79, 0x14, 0x5e, 0x41, 0x04, 0x00, 
    0x39, 0x14, 0x51, 0x55, 0x23, 0x40, 
    0x79, 0x14, 0x5e, 0x49, 0x14, 0x40, 
    0x39, 0x14, 0x0e, 0x05, 0x13, 0x80, 
    0x7c, 0x41, 0x04, 0x10, 0x41, 0x00, 
    0x45, 0x14, 0x51, 0x45, 0x13, 0x80, 
    0x45, 0x14, 0x51, 0x44, 0xa1, 0x00, 
    0x45, 0x15, 0x55, 0x55, 0x52, 0x80, 
    0x45, 0x12, 0x84, 0x29, 0x14, 0x40, 
    0x45, 0x14, 0x4a, 0x10, 0x41, 0x00, 
    0x78, 0x21, 0x08, 0x41, 0x07, 0x80, 
    0x38, 0x82, 0x08, 0x20, 0x83, 0x80, 
    0x01, 0x02, 0x04, 0x08, 0x10, 0x00, 
    0x38, 0x20, 0x82, 0x08, 0x23, 0x80, 
    0x10, 0xa4, 0x40, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 
    0x30, 0xc1, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x03, 0x81, 0x3d, 0x13, 0xc0, 
    0x41, 0x07, 0x91, 0x45, 0x17, 0x80, 
    0x00, 0x03, 0x91, 0x41, 0x13, 0x80, 
    0x04, 0x13, 0xd1, 0x45, 0x13, 0xc0, 
    0x00, 0x03, 0x91, 0x79, 0x03, 0x80, 
    0x18, 0x82, 0x1e, 0x20, 0x82, 0x00, 
    0x00, 0x03, 0xd1, 0x44, 0xf0, 0x4e, 
    0x41, 0x07, 0x12, 0x49, 0x24, 0x80, 
    0x10, 0x01, 0x04, 0x10, 0x41, 0x80, 
    0x08, 0x01, 0x82, 0x08, 0x24, 0x8c, 
    0x41, 0x04, 0x94, 0x61, 0x44, 0x80, 
    0x10, 0x41, 0x04, 0x10, 0x41, 0x80, 
    0x00, 0x06, 0x95, 0x55, 0x14, 0x40, 
    0x00, 0x07, 0x12, 0x49, 0x24, 0x80, 
    0x00, 0x03, 0x91, 0x45, 0x13, 0x80, 
    0x00, 0x07, 0x91, 0x45, 0x17, 0x90, 
    0x00, 0x03, 0xd1, 0x45, 0x13, 0xc1, 
    0x00, 0x05, 0x89, 0x20, 0x87, 0x00, 
    0x00, 0x03, 0x90, 0x38, 0x13, 0x80, 
    0x00, 0x87, 0x88, 0x20, 0xa1, 0x00, 
    0x00, 0x04, 0x92, 0x49, 0x62, 0x80, 
    0x00, 0x04, 0x51, 0x44, 0xa1, 0x00, 
    0x00, 0x04, 0x51, 0x55, 0xf2, 0x80, 
    0x00, 0x04, 0x92, 0x31, 0x24, 0x80, 
    0x00, 0x04, 0x92, 0x48, 0xe1, 0x18, 
    0x00, 0x07, 0x82, 0x31, 0x07, 0x80, 
    0x18, 0x82, 0x18, 0x20, 0x81, 0x80, 
    0x10, 0x41, 0x00, 0x10, 0x41, 0x00, 
    0x30, 0x20, 0x83, 0x08, 0x23, 0x00, 
    0x29, 0x40, 0x00, 0x00, 0x00, 0x00, 
    
};

static const uint8_t tft_font_data_8x12[95*12] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0x20, 0x00, 0x00, 
    0x00, 0x28, 0x50, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x28, 0x28, 0xFC, 0x28, 0x50, 0xFC, 0x50, 0x50, 0x00, 0x00, 
    0x00, 0x20, 0x78, 0xA8, 0xA0, 0x60, 0x30, 0x28, 0xA8, 0xF0, 0x20, 0x00, 
    0x00, 0x00, 0x48, 0xA8, 0xB0, 0x50, 0x28, 0x34, 0x54, 0x48, 0x00, 0x00, 
    0x00, 0x00, 0x20, 0x50, 0x50, 0x78, 0xA8, 0xA8, 0x90, 0x6C, 0x00, 0x00, 
    0x00, 0x40, 0x40, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x04, 0x08, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x08, 0x04, 0x00, 
    0x00, 0x40, 0x20, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x20, 0x40, 0x00, 
    0x00, 0x00, 0x00, 0x20, 0xA8, 0x70, 0x70, 0xA8, 0x20, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x20, 0x20, 0x20, 0xF8, 0x20, 0x20, 0x20, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x40, 0x80, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 
    0x00, 0x08, 0x10, 0x10, 0x10, 0x20, 0x20, 0x40, 0x40, 0x40, 0x80, 0x00, 
    0x00, 0x00, 0x70, 0x88, 0x88, 0x88, 0x88, 0x88, 0x88, 0x70, 0x00, 0x00, 
    0x00, 0x00, 0x20, 0x60, 0x20, 0x20, 0x20, 0x20, 0x20, 0x70, 0x00, 0x00, 
    0x00, 0x00, 0x70, 0x88, 0x88, 0x10, 0x20, 0x40, 0x80, 0xF8, 0x00, 0x00, 
    0x00, 0x00, 0x70, 0x88, 0x08, 0x30, 0x08, 0x08, 0x88, 0x70, 0x00, 0x00, 
    0x00, 0x00, 0x10, 0x30, 0x50, 0x50, 0x90, 0x78, 0x10, 0x18, 0x00, 0x00, 
    0x00, 0x00, 0xF8, 0x80, 0x80, 0xF0, 0x08, 0x08, 0x88, 0x70, 0x00, 0x00, 
    0x00, 0x00, 0x70, 0x90, 0x80, 0xF0, 0x88, 0x88, 0x88, 0x70, 0x00, 0x00, 
    0x00, 0x00, 0xF8, 0x90, 0x10, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0x00, 
    0x00, 0x00, 0x70, 0x88, 0x88, 0x70, 0x88, 0x88, 0x88, 0x70, 0x00, 0x00, 
    0x00, 0x00, 0x70, 0x88, 0x88, 0x88, 0x78, 0x08, 0x48, 0x70, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x20, 0x20, 0x00, 
    0x00, 0x04, 0x08, 0x10, 0x20, 0x40, 0x20, 0x10, 0x08, 0x04, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0xF8, 0x00, 0x00, 0xF8, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x40, 0x20, 0x10, 0x08, 0x04, 0x08, 0x10, 0x20, 0x40, 0x00, 0x00, 
    0x00, 0x00, 0x70, 0x88, 0x88, 0x10, 0x20, 0x20, 0x00, 0x20, 0x00, 0x00, 
    0x00, 0x00, 0x70, 0x88, 0x98, 0xA8, 0xA8, 0xB8, 0x80, 0x78, 0x00, 0x00, 
    0x00, 0x00, 0x20, 0x20, 0x30, 0x50, 0x50, 0x78, 0x48, 0xCC, 0x00, 0x00, 
    0x00, 0x00, 0xF0, 0x48, 0x48, 0x70, 0x48, 0x48, 0x48, 0xF0, 0x00, 0x00, 
    0x00, 0x00, 0x78, 0x88, 0x80, 0x80, 0x80, 0x80, 0x88, 0x70, 0x00, 0x00, 
    0x00, 0x00, 0xF0, 0x48, 0x48, 0x48, 0x48, 0x48, 0x48, 0xF0, 0x00, 0x00, 
    0x00, 0x00, 0xF8, 0x48, 0x50, 0x70, 0x50, 0x40, 0x48, 0xF8, 0x00, 0x00, 
    0x00, 0x00, 0xF8, 0x48, 0x50, 0x70, 0x50, 0x40, 0x40, 0xE0, 0x00, 0x00, 
    0x00, 0x00, 0x38, 0x48, 0x80, 0x80, 0x9C, 0x88, 0x48, 0x30, 0x00, 0x00, 
    0x00, 0x00, 0xCC, 0x48, 0x48, 0x78, 0x48, 0x48, 0x48, 0xCC, 0x00, 0x00, 
    0x00, 0x00, 0xF8, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0xF8, 0x00, 0x00, 
    0x00, 0x00, 0x7C, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x90, 0xE0, 0x00, 
    0x00, 0x00, 0xEC, 0x48, 0x50, 0x60, 0x50, 0x50, 0x48, 0xEC, 0x00, 0x00, 
    0x00, 0x00, 0xE0, 0x40, 0x40, 0x40, 0x40, 0x40, 0x44, 0xFC, 0x00, 0x00, 
    0x00, 0x00, 0xD8, 0xD8, 0xD8, 0xD8, 0xA8, 0xA8, 0xA8, 0xA8, 0x00, 0x00, 
    0x00, 0x00, 0xDC, 0x48, 0x68, 0x68, 0x58, 0x58, 0x48, 0xE8, 0x00, 0x00, 
    0x00, 0x00, 0x70, 0x88, 0x88, 0x88, 0x88, 0x88, 0x88, 0x70, 0x00, 0x00, 
    0x00, 0x00, 0xF0, 0x48, 0x48, 0x70, 0x40, 0x40, 0x40, 0xE0, 0x00, 0x00, 
    0x00, 0x00, 0x70, 0x88, 0x88, 0x88, 0x88, 0xE8, 0x98, 0x70, 0x18, 0x00, 
    0x00, 0x00, 0xF0, 0x48, 0x48, 0x70, 0x50, 0x48, 0x48, 0xEC, 0x00, 0x00, 
    0x00, 0x00, 0x78, 0x88, 0x80, 0x60, 0x10, 0x08, 0x88, 0xF0, 0x00, 0x00, 
    0x00, 0x00, 0xF8, 0xA8, 0x20, 0x20, 0x20, 0x20, 0x20, 0x70, 0x00, 0x00, 
    0x00, 0x00, 0xCC, 0x48, 0x48, 0x48, 0x48, 0x48, 0x48, 0x30, 0x00, 0x00, 
    0x00, 0x00, 0xCC, 0x48, 0x48, 0x50, 0x50, 0x30, 0x20, 0x20, 0x00, 0x00, 
    0x00, 0x00, 0xA8, 0xA8, 0xA8, 0x70, 0x50, 0x50, 0x50, 0x50, 0x00, 0x00, 
    0x00, 0x00, 0xD8, 0x50, 0x50, 0x20, 0x20, 0x50, 0x50, 0xD8, 0x00, 0x00, 
    0x00, 0x00, 0xD8, 0x50, 0x50, 0x20, 0x20, 0x20, 0x20, 0x70, 0x00, 0x00, 
    0x00, 0x00, 0xF8, 0x90, 0x10, 0x20, 0x20, 0x40, 0x48, 0xF8, 0x00, 0x00, 
    0x00, 0x38, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x38, 0x00, 
    0x00, 0x40, 0x40, 0x40, 0x20, 0x20, 0x10, 0x10, 0x10, 0x08, 0x00, 0x00, 
    0x00, 0x70, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x70, 0x00, 
    0x00, 0x20, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 
    0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x48, 0x38, 0x48, 0x3C, 0x00, 0x00, 
    0x00, 0x00, 0xC0, 0x40, 0x40, 0x70, 0x48, 0x48, 0x48, 0x70, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x48, 0x40, 0x40, 0x38, 0x00, 0x00, 
    0x00, 0x00, 0x18, 0x08, 0x08, 0x38, 0x48, 0x48, 0x48, 0x3C, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x48, 0x78, 0x40, 0x38, 0x00, 0x00, 
    0x00, 0x00, 0x1C, 0x20, 0x20, 0x78, 0x20, 0x20, 0x20, 0x78, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x48, 0x30, 0x40, 0x78, 0x44, 0x38, 
    0x00, 0x00, 0xC0, 0x40, 0x40, 0x70, 0x48, 0x48, 0x48, 0xEC, 0x00, 0x00, 
    0x00, 0x00, 0x20, 0x00, 0x00, 0x60, 0x20, 0x20, 0x20, 0x70, 0x00, 0x00, 
    0x00, 0x00, 0x10, 0x00, 0x00, 0x30, 0x10, 0x10, 0x10, 0x10, 0x10, 0xE0, 
    0x00, 0x00, 0xC0, 0x40, 0x40, 0x5C, 0x50, 0x70, 0x48, 0xEC, 0x00, 0x00, 
    0x00, 0x00, 0xE0, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0xF8, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xA8, 0xA8, 0xA8, 0xA8, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x48, 0x48, 0x48, 0xEC, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x48, 0x48, 0x48, 0x30, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x48, 0x48, 0x48, 0x70, 0x40, 0xE0, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x48, 0x48, 0x48, 0x38, 0x08, 0x1C, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0xD8, 0x60, 0x40, 0x40, 0xE0, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0x40, 0x30, 0x08, 0x78, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x20, 0x20, 0x70, 0x20, 0x20, 0x20, 0x18, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0xD8, 0x48, 0x48, 0x48, 0x3C, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0xEC, 0x48, 0x50, 0x30, 0x20, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0xA8, 0xA8, 0x70, 0x50, 0x50, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0xD8, 0x50, 0x20, 0x50, 0xD8, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0xEC, 0x48, 0x50, 0x30, 0x20, 0x20, 0xC0, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0x10, 0x20, 0x20, 0x78, 0x00, 0x00, 
    0x00, 0x18, 0x10, 0x10, 0x10, 0x20, 0x10, 0x10, 0x10, 0x10, 0x18, 0x00, 
    0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 
    0x00, 0x60, 0x20, 0x20, 0x20, 0x10, 0x20, 0x20, 0x20, 0x20, 0x60, 0x00, 
    0x40, 0xA4, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
};

static const uint8_t tft_font_data_12x16[95*24] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x06, 0x00, 0x60, 0x0f, 0x00, 0xf0, 0x0f, 0x00, 0xf0, 0x0f, 0x00, 0x60, 0x06, 0x00, 0x60, 0x00, 0x00, 0x00, 0x06, 0x00, 0x60, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x19, 0x81, 0x98, 0x19, 0x81, 0x98, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x66, 0x06, 0x60, 0x66, 0x3f, 0xf0, 0xcc, 0x0c, 0xc1, 0x98, 0x19, 0x87, 0xfc, 0x33, 0x03, 0x30, 0x33, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x06, 0x00, 0x60, 0x1f, 0x83, 0xfc, 0x36, 0x03, 0x60, 0x3f, 0x81, 0xfc, 0x06, 0xc0, 0x6c, 0x3f, 0xc1, 0xf8, 0x06, 0x00, 0x60, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x13, 0x83, 0x38, 0x73, 0x8e, 0x01, 0xc0, 0x38, 0x07, 0x00, 0xe0, 0x1c, 0x03, 0x8e, 0x70, 0xe6, 0x0e, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x70, 0x0d, 0x81, 0x98, 0x19, 0x81, 0xb0, 0x0e, 0x01, 0xe0, 0x3e, 0x03, 0x36, 0x33, 0xc3, 0x18, 0x3b, 0xc1, 0xe6, 0x00, 0x00, 0x00, 
    0x0e, 0x00, 0xe0, 0x0e, 0x00, 0x60, 0x06, 0x00, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x03, 0x80, 0x60, 0x0e, 0x00, 0xc0, 0x1c, 0x01, 0xc0, 0x1c, 0x01, 0xc0, 0x1c, 0x01, 0xc0, 0x0c, 0x00, 0xe0, 0x06, 0x00, 0x38, 0x00, 0x00, 0x00, 
    0x1c, 0x00, 0x60, 0x07, 0x00, 0x30, 0x03, 0x80, 0x38, 0x03, 0x80, 0x38, 0x03, 0x80, 0x38, 0x03, 0x00, 0x70, 0x06, 0x01, 0xc0, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x03, 0x6c, 0x36, 0xc1, 0xf8, 0x0f, 0x03, 0xfc, 0x0f, 0x01, 0xf8, 0x36, 0xc3, 0x6c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x00, 0x60, 0x06, 0x03, 0xfc, 0x3f, 0xc0, 0x60, 0x06, 0x00, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0x0e, 0x00, 0xe0, 0x06, 0x00, 0xc0, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xfc, 0x3f, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0x0e, 0x00, 0xe0, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x01, 0x00, 0x30, 0x07, 0x00, 0xe0, 0x1c, 0x03, 0x80, 0x70, 0x0e, 0x01, 0xc0, 0x38, 0x07, 0x00, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x0f, 0x83, 0xfe, 0x30, 0x66, 0x07, 0x60, 0xf6, 0x1b, 0x63, 0x36, 0x63, 0x6c, 0x37, 0x83, 0x70, 0x33, 0x06, 0x3f, 0xe0, 0xf8, 0x00, 0x00, 0x00, 
    0x03, 0x00, 0x70, 0x1f, 0x01, 0xf0, 0x03, 0x00, 0x30, 0x03, 0x00, 0x30, 0x03, 0x00, 0x30, 0x03, 0x00, 0x30, 0x1f, 0xe1, 0xfe, 0x00, 0x00, 0x00, 
    0x1f, 0xc3, 0xfe, 0x70, 0x76, 0x03, 0x60, 0x70, 0x0e, 0x01, 0xc0, 0x38, 0x07, 0x00, 0xe0, 0x1c, 0x03, 0x80, 0x7f, 0xf7, 0xff, 0x00, 0x00, 0x00, 
    0x1f, 0xc3, 0xfe, 0x70, 0x76, 0x03, 0x00, 0x30, 0x07, 0x0f, 0xe0, 0xfc, 0x00, 0x60, 0x03, 0x60, 0x37, 0x07, 0x3f, 0xe1, 0xfc, 0x00, 0x00, 0x00, 
    0x01, 0xc0, 0x3c, 0x07, 0xc0, 0xec, 0x1c, 0xc3, 0x8c, 0x70, 0xc6, 0x0c, 0x7f, 0xf7, 0xff, 0x00, 0xc0, 0x0c, 0x00, 0xc0, 0x0c, 0x00, 0x00, 0x00, 
    0x7f, 0xf7, 0xff, 0x60, 0x06, 0x00, 0x60, 0x07, 0xfc, 0x3f, 0xe0, 0x07, 0x00, 0x30, 0x03, 0x60, 0x37, 0x07, 0x3f, 0xe1, 0xfc, 0x00, 0x00, 0x00, 
    0x03, 0xc0, 0x7c, 0x0e, 0x01, 0xc0, 0x38, 0x03, 0x00, 0x7f, 0xc7, 0xfe, 0x70, 0x76, 0x03, 0x60, 0x37, 0x07, 0x3f, 0xe1, 0xfc, 0x00, 0x00, 0x00, 
    0x7f, 0xf7, 0xff, 0x00, 0x60, 0x06, 0x00, 0xc0, 0x0c, 0x01, 0x80, 0x18, 0x03, 0x00, 0x30, 0x06, 0x00, 0x60, 0x0c, 0x00, 0xc0, 0x00, 0x00, 0x00, 
    0x0f, 0x81, 0xfc, 0x38, 0xe3, 0x06, 0x30, 0x63, 0x8e, 0x1f, 0xc3, 0xfe, 0x70, 0x76, 0x03, 0x60, 0x37, 0x07, 0x3f, 0xe1, 0xfc, 0x00, 0x00, 0x00, 
    0x1f, 0xc3, 0xfe, 0x70, 0x76, 0x03, 0x60, 0x37, 0x07, 0x3f, 0xf1, 0xff, 0x00, 0x60, 0x0e, 0x01, 0xc0, 0x38, 0x1f, 0x01, 0xe0, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x00, 0xe0, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x00, 0xe0, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x00, 0xe0, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x00, 0xe0, 0x0e, 0x00, 0x60, 0x06, 0x00, 0xc0, 
    0x00, 0xc0, 0x1c, 0x03, 0x80, 0x70, 0x0e, 0x01, 0xc0, 0x38, 0x03, 0x80, 0x1c, 0x00, 0xe0, 0x07, 0x00, 0x38, 0x01, 0xc0, 0x0c, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xfe, 0x3f, 0xe0, 0x00, 0x00, 0x03, 0xfe, 0x3f, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x30, 0x03, 0x80, 0x1c, 0x00, 0xe0, 0x07, 0x00, 0x38, 0x01, 0xc0, 0x1c, 0x03, 0x80, 0x70, 0x0e, 0x01, 0xc0, 0x38, 0x03, 0x00, 0x00, 0x00, 0x00, 
    0x1f, 0x83, 0xfc, 0x70, 0xe6, 0x06, 0x60, 0xe0, 0x1c, 0x03, 0x80, 0x70, 0x06, 0x00, 0x60, 0x06, 0x00, 0x00, 0x06, 0x00, 0x60, 0x00, 0x00, 0x00, 
    0x1f, 0xc3, 0xfe, 0x30, 0x66, 0x7b, 0x6f, 0xb6, 0xdb, 0x6d, 0xb6, 0xdb, 0x6d, 0xb6, 0xfe, 0x67, 0xc7, 0x00, 0x3f, 0xc0, 0xfc, 0x00, 0x00, 0x00, 
    0x06, 0x00, 0x60, 0x0f, 0x00, 0xf0, 0x0f, 0x01, 0x98, 0x19, 0x81, 0x98, 0x30, 0xc3, 0xfc, 0x3f, 0xc6, 0x06, 0x60, 0x66, 0x06, 0x00, 0x00, 0x00, 
    0x7f, 0x07, 0xf8, 0x61, 0xc6, 0x0c, 0x60, 0xc6, 0x1c, 0x7f, 0x87, 0xfc, 0x60, 0xe6, 0x06, 0x60, 0x66, 0x0e, 0x7f, 0xc7, 0xf8, 0x00, 0x00, 0x00, 
    0x0f, 0x81, 0xfc, 0x38, 0xe3, 0x06, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x30, 0x63, 0x8e, 0x1f, 0xc0, 0xf8, 0x00, 0x00, 0x00, 
    0x7f, 0x07, 0xf8, 0x61, 0xc6, 0x0c, 0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x60, 0xc6, 0x1c, 0x7f, 0x87, 0xf0, 0x00, 0x00, 0x00, 
    0x7f, 0xe7, 0xfe, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x7f, 0x87, 0xf8, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x7f, 0xe7, 0xfe, 0x00, 0x00, 0x00, 
    0x7f, 0xe7, 0xfe, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x7f, 0x87, 0xf8, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x00, 0x00, 0x00, 
    0x0f, 0xc1, 0xfe, 0x38, 0x63, 0x00, 0x60, 0x06, 0x00, 0x63, 0xe6, 0x3e, 0x60, 0x66, 0x06, 0x30, 0x63, 0x86, 0x1f, 0xe0, 0xfe, 0x00, 0x00, 0x00, 
    0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x7f, 0xe7, 0xfe, 0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x00, 0x00, 0x00, 
    0x1f, 0x81, 0xf8, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x1f, 0x81, 0xf8, 0x00, 0x00, 0x00, 
    0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x66, 0x06, 0x60, 0x67, 0x0c, 0x3f, 0xc1, 0xf8, 0x00, 0x00, 0x00, 
    0x60, 0x66, 0x0e, 0x61, 0xc6, 0x38, 0x67, 0x06, 0xe0, 0x7c, 0x07, 0xc0, 0x6e, 0x06, 0x70, 0x63, 0x86, 0x1c, 0x60, 0xe6, 0x06, 0x00, 0x00, 0x00, 
    0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x7f, 0xe7, 0xfe, 0x00, 0x00, 0x00, 
    0x60, 0x67, 0x0e, 0x70, 0xe7, 0x9e, 0x79, 0xe6, 0xf6, 0x6f, 0x66, 0x66, 0x66, 0x66, 0x06, 0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x00, 0x00, 0x00, 
    0x60, 0x67, 0x06, 0x70, 0x67, 0x86, 0x6c, 0x66, 0xc6, 0x66, 0x66, 0x66, 0x63, 0x66, 0x36, 0x61, 0xe6, 0x0e, 0x60, 0xe6, 0x06, 0x00, 0x00, 0x00, 
    0x0f, 0x01, 0xf8, 0x39, 0xc3, 0x0c, 0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x30, 0xc3, 0x9c, 0x1f, 0x80, 0xf0, 0x00, 0x00, 0x00, 
    0x7f, 0x87, 0xfc, 0x60, 0xe6, 0x06, 0x60, 0x66, 0x06, 0x60, 0xe7, 0xfc, 0x7f, 0x86, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x00, 0x00, 0x00, 
    0x0f, 0x01, 0xf8, 0x39, 0xc3, 0x0c, 0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x60, 0x66, 0x36, 0x33, 0xc3, 0x9c, 0x1f, 0xe0, 0xf6, 0x00, 0x00, 0x00, 
    0x7f, 0x87, 0xfc, 0x60, 0xe6, 0x06, 0x60, 0x66, 0x06, 0x60, 0xe7, 0xfc, 0x7f, 0x86, 0x70, 0x63, 0x86, 0x1c, 0x60, 0xe6, 0x06, 0x00, 0x00, 0x00, 
    0x1f, 0x83, 0xfc, 0x70, 0xe6, 0x06, 0x60, 0x07, 0x00, 0x3f, 0x81, 0xfc, 0x00, 0xe0, 0x06, 0x60, 0x67, 0x0e, 0x3f, 0xc1, 0xf8, 0x00, 0x00, 0x00, 
    0x3f, 0xc3, 0xfc, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x00, 0x00, 0x00, 
    0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x60, 0x63, 0x0c, 0x3f, 0xc1, 0xf8, 0x00, 0x00, 0x00, 
    0x60, 0x66, 0x06, 0x60, 0x63, 0x0c, 0x30, 0xc3, 0x0c, 0x19, 0x81, 0x98, 0x19, 0x80, 0xf0, 0x0f, 0x00, 0xf0, 0x06, 0x00, 0x60, 0x00, 0x00, 0x00, 
    0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x60, 0x66, 0x66, 0x66, 0x66, 0xf6, 0x79, 0xe7, 0x0e, 0x70, 0xe6, 0x06, 0x00, 0x00, 0x00, 
    0x60, 0x66, 0x06, 0x30, 0xc3, 0x0c, 0x19, 0x80, 0xf0, 0x06, 0x00, 0x60, 0x0f, 0x01, 0x98, 0x30, 0xc3, 0x0c, 0x60, 0x66, 0x06, 0x00, 0x00, 0x00, 
    0x60, 0x66, 0x06, 0x30, 0xc3, 0x0c, 0x19, 0x81, 0x98, 0x0f, 0x00, 0xf0, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x00, 0x00, 0x00, 
    0x7f, 0xe7, 0xfe, 0x00, 0xc0, 0x0c, 0x01, 0x80, 0x30, 0x06, 0x00, 0x60, 0x0c, 0x01, 0x80, 0x30, 0x03, 0x00, 0x7f, 0xe7, 0xfe, 0x00, 0x00, 0x00, 
    0x1f, 0x81, 0xf8, 0x18, 0x01, 0x80, 0x18, 0x01, 0x80, 0x18, 0x01, 0x80, 0x18, 0x01, 0x80, 0x18, 0x01, 0x80, 0x1f, 0x81, 0xf8, 0x00, 0x00, 0x00, 
    0x00, 0x04, 0x00, 0x60, 0x07, 0x00, 0x38, 0x01, 0xc0, 0x0e, 0x00, 0x70, 0x03, 0x80, 0x1c, 0x00, 0xe0, 0x07, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 
    0x1f, 0x81, 0xf8, 0x01, 0x80, 0x18, 0x01, 0x80, 0x18, 0x01, 0x80, 0x18, 0x01, 0x80, 0x18, 0x01, 0x80, 0x18, 0x1f, 0x81, 0xf8, 0x00, 0x00, 0x00, 
    0x02, 0x00, 0x70, 0x0f, 0x81, 0xdc, 0x38, 0xe7, 0x07, 0x60, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xf7, 0xff, 
    0x00, 0x00, 0x70, 0x07, 0x00, 0x70, 0x06, 0x00, 0x60, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xfc, 0x3f, 0xe0, 0x06, 0x1f, 0xe3, 0xfe, 0x60, 0x66, 0x06, 0x7f, 0xe3, 0xfe, 0x00, 0x00, 0x00, 
    0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0xf8, 0x7f, 0xc7, 0x0e, 0x60, 0x66, 0x06, 0x60, 0x66, 0x0e, 0x7f, 0xc7, 0xf8, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xf8, 0x3f, 0xc7, 0x06, 0x60, 0x06, 0x00, 0x60, 0x07, 0x06, 0x3f, 0xc1, 0xf8, 0x00, 0x00, 0x00, 
    0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x61, 0xf6, 0x3f, 0xe7, 0x1e, 0x60, 0x66, 0x06, 0x60, 0x67, 0x06, 0x3f, 0xe1, 0xfe, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xf8, 0x3f, 0xc7, 0x06, 0x7f, 0xe7, 0xfc, 0x60, 0x07, 0x00, 0x3f, 0xc1, 0xf8, 0x00, 0x00, 0x00, 
    0x07, 0x80, 0xf8, 0x1c, 0x01, 0x80, 0x18, 0x01, 0x80, 0x7f, 0x07, 0xf0, 0x18, 0x01, 0x80, 0x18, 0x01, 0x80, 0x18, 0x01, 0x80, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xfe, 0x3f, 0xe7, 0x06, 0x60, 0x67, 0x0e, 0x3f, 0xe1, 0xf6, 0x00, 0x60, 0x0e, 0x3f, 0xc3, 0xf8, 
    0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0xf0, 0x7f, 0x87, 0x1c, 0x60, 0xc6, 0x0c, 0x60, 0xc6, 0x0c, 0x60, 0xc6, 0x0c, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x06, 0x00, 0x60, 0x00, 0x00, 0xe0, 0x0e, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x1f, 0x81, 0xf8, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x01, 0x80, 0x18, 0x00, 0x00, 0x38, 0x03, 0x80, 0x18, 0x01, 0x80, 0x18, 0x01, 0x80, 0x18, 0x01, 0x81, 0x98, 0x1f, 0x80, 0xf0, 
    0x30, 0x03, 0x00, 0x30, 0x03, 0x00, 0x30, 0x03, 0x18, 0x33, 0x83, 0x70, 0x3e, 0x03, 0xe0, 0x37, 0x03, 0x38, 0x31, 0xc3, 0x0c, 0x00, 0x00, 0x00, 
    0x0e, 0x00, 0xe0, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x1f, 0x81, 0xf8, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x98, 0x7f, 0xc7, 0xfe, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xf8, 0x3f, 0xc3, 0x0e, 0x30, 0x63, 0x06, 0x30, 0x63, 0x06, 0x30, 0x63, 0x06, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xf8, 0x3f, 0xc7, 0x0e, 0x60, 0x66, 0x06, 0x60, 0x67, 0x0e, 0x3f, 0xc1, 0xf8, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xf8, 0x7f, 0xc6, 0x0e, 0x60, 0x66, 0x06, 0x70, 0xe7, 0xfc, 0x6f, 0x86, 0x00, 0x60, 0x06, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xfe, 0x3f, 0xe7, 0x06, 0x60, 0x66, 0x06, 0x70, 0xe3, 0xfe, 0x1f, 0x60, 0x06, 0x00, 0x60, 0x06, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x7c, 0x3f, 0xe3, 0x86, 0x30, 0x03, 0x00, 0x30, 0x03, 0x00, 0x30, 0x03, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xf0, 0x7f, 0x86, 0x00, 0x7f, 0x03, 0xf8, 0x01, 0x80, 0x18, 0x7f, 0x83, 0xf0, 0x00, 0x00, 0x00, 
    0x00, 0x01, 0x80, 0x18, 0x01, 0x80, 0x18, 0x07, 0xf0, 0x7f, 0x01, 0x80, 0x18, 0x01, 0x80, 0x18, 0x01, 0x80, 0x1f, 0x80, 0xf8, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x06, 0x60, 0x66, 0x06, 0x60, 0x66, 0x06, 0x60, 0x67, 0x0e, 0x3f, 0xe1, 0xf6, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x06, 0x60, 0x63, 0x0c, 0x30, 0xc1, 0x98, 0x19, 0x80, 0xf0, 0x0f, 0x00, 0x60, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x6f, 0x63, 0xfc, 0x39, 0xc1, 0x08, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x0c, 0x71, 0xc3, 0xb8, 0x1f, 0x00, 0xe0, 0x1f, 0x03, 0xb8, 0x71, 0xc6, 0x0c, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x0c, 0x30, 0xc1, 0x98, 0x19, 0x80, 0xf0, 0x0f, 0x00, 0x60, 0x06, 0x00, 0xc0, 0x0c, 0x01, 0x80, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xfc, 0x7f, 0x80, 0x30, 0x06, 0x00, 0xc0, 0x18, 0x03, 0x00, 0x7f, 0xc7, 0xfc, 0x00, 0x00, 0x00, 
    0x03, 0xc0, 0x7c, 0x0e, 0x00, 0xc0, 0x0c, 0x00, 0xc0, 0x1c, 0x03, 0x80, 0x1c, 0x00, 0xc0, 0x0c, 0x00, 0xc0, 0x0e, 0x00, 0x7c, 0x03, 0xc0, 0x00, 
    0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x06, 0x00, 0x60, 0x00, 0x00, 0x00, 
    0x3c, 0x03, 0xe0, 0x07, 0x00, 0x30, 0x03, 0x00, 0x30, 0x03, 0x80, 0x1c, 0x03, 0x80, 0x30, 0x03, 0x00, 0x30, 0x07, 0x03, 0xe0, 0x3c, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x1c, 0x63, 0x6c, 0x63, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
};

const tft_font_t tft_font_6x8   = {  6,  8,  6, tft_font_data_6x8   };
const tft_font_t tft_font_8x12  = {  8, 12, 12, tft_font_data_8x12  };
const tft_font_t tft_font_12x16 = { 12, 16, 24, tft_font_data_12x16 };

void tft_initialize(void)
{
    ili9341_initialize();
}

void tft_draw_point(uint32_t x, uint32_t y, uint16_t color)
{
    ili9341_select();
    ili9341_draw_point(x, y, color);
    ili9341_deselect();
}

void tft_draw_line(uint32_t x1, uint32_t y1, uint32_t x2, uint32_t y2, uint16_t color)
{
    ili9341_select();
    ili9341_draw_line(x1, y1, x2, y2, color);
    ili9341_deselect();
}

void tft_draw_rectangle(uint32_t x, uint32_t y, uint32_t w, uint32_t h, uint16_t color)
{
    ili9341_select();

    if ((w > 1) && (h > 1))
    {
	ili9341_fill_rectangle(x, y, (w-1), 1, color);
	ili9341_fill_rectangle(x + (w-1), y, 1, (h-1), color);
	ili9341_fill_rectangle(x +1, y + (h-1), (w-1), 1, color);
	ili9341_fill_rectangle(x, y +1, 1, (h-1), color);
    }
    else
    {
	ili9341_fill_rectangle(x, y, w, h, color);
    }

    ili9341_deselect();
}

void tft_draw_mono(uint32_t x, uint32_t y, uint32_t w, uint32_t h, const uint8_t *data, uint16_t color0, uint16_t color1, int transparent)
{
    ili9341_select();

    ili9341_write_mono(x, y, w, h, data, color0, color1, transparent);
           
    ili9341_deselect();
}

void tft_draw_string(uint32_t x, uint32_t y, const char *string, const tft_font_t *font, uint16_t color0, uint16_t color1, int transparent)
{
    char c;

    ili9341_select();

    while ((c = *string++))
    {
        if ((c >= 0x20) && (c < 0x7f))
        {
            ili9341_write_mono(x, y, font->font_width, font->font_height, font->font_data + (font->font_offset * (c - 0x20)), color0, color1, transparent);

            x += font->font_width;
        }
    }
           
    ili9341_deselect();
}

void tft_fill_rectangle(uint32_t x, uint32_t y, uint32_t w, uint32_t h, uint16_t color)
{
    ili9341_select();
    ili9341_fill_rectangle(x, y, w, h, color);
    ili9341_deselect();
}

void tft_write_image(uint32_t x, uint32_t y, uint32_t w, uint32_t h, const uint8_t *data, const uint16_t *palette, int compressed)
{
    ili9341_select();
    ili9341_write_image(x, y, w, h, data, palette, compressed);
    ili9341_deselect();
}
